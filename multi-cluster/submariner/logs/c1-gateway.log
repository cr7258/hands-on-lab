root@seven-demo:~/demo# kubectl logs -n submariner-operator   submariner-gateway-g5n22 --context kind-c1
+ trap 'exit 1' SIGTERM SIGINT
+ export CHARON_PID_FILE=/var/run/charon.pid
+ CHARON_PID_FILE=/var/run/charon.pid
+ rm -f /var/run/charon.pid
+ SUBMARINER_VERBOSITY=2
+ '[' false == true ']'
+ DEBUG=-v=2
++ cat /proc/sys/net/ipv4/conf/all/send_redirects
+ [[ 0 = 0 ]]
+ exec submariner-gateway -v=2 -alsologtostderr
2023-04-05T02:52:04.787Z INF ../submariner/main.go:109 main                 Starting the submariner gateway engine
2023-04-05T02:52:04.788Z INF ../submariner/main.go:117 main                 Parsed env variables
W0405 02:52:04.788453       1 client_config.go:617] Neither --kubeconfig nor --master was specified.  Using the inClusterConfig.  This might not work.
2023-04-05T02:52:04.790Z INF ../submariner/main.go:133 main                 Creating the cable engine
2023-04-05T02:52:04.790Z INF ../submariner/main.go:144 main                 AIR_GAPPED_DEPLOYMENT is set to false
2023-04-05T02:52:06.965Z DBG ..t/local_endpoint.go:226 Endpoint             Interface "lo" has "127.0.0.1" address
2023-04-05T02:52:06.966Z DBG ..t/local_endpoint.go:226 Endpoint             Interface "veth6d316896" has "10.8.1.1" address
2023-04-05T02:52:06.966Z DBG ..t/local_endpoint.go:231 Endpoint             Found CNI Interface "veth6d316896" that has IP "10.8.1.1" from ClusterCIDR "10.8.0.0/16"
2023-04-05T02:52:06.966Z INF ../submariner/main.go:154 main                 Creating the datastore syncer
2023-04-05T02:52:07.168Z DBG ..ery/natdiscovery.go:120 NAT                  NAT discovery server starting on port 4490
2023-04-05T02:52:07.964Z INF ..ine/syncer/syncer.go:92 GWSyncer             CableEngine syncer started
2023-04-05T02:52:07.965Z INF ../submariner/main.go:368 main                 Gateway leader election config values: main.leaderConfig{LeaseDuration:10, RenewDeadline:5, RetryPeriod:2}
2023-04-05T02:52:07.965Z INF ../submariner/main.go:386 main                 Using namespace "submariner-operator" for the leader election lock
I0405 02:52:07.965471       1 leaderelection.go:248] attempting to acquire leader lease submariner-operator/submariner-gateway-lock...
I0405 02:52:08.262862       1 leaderelection.go:258] successfully acquired lease submariner-operator/submariner-gateway-lock
2023-04-05T02:52:08.263Z DBG ..ols/record/event.go:285 main                 Event(v1.ObjectReference{Kind:"ConfigMap", Namespace:"submariner-operator", Name:"submariner-gateway-lock", UID:"8682d4c9-2fe7-402b-8308-31d59e2a8d5e", APIVersion:"v1", ResourceVersion:"1043", FieldPath:""}): type: 'Normal' reason: 'LeaderElection' c1-worker-submariner-gateway became leader
2023-04-05T02:52:08.263Z DBG ..ols/record/event.go:285 main                 Event(v1.ObjectReference{Kind:"Lease", Namespace:"submariner-operator", Name:"submariner-gateway-lock", UID:"8790a41e-bb7e-41d8-aa1c-3926c46b97c2", APIVersion:"coordination.k8s.io/v1", ResourceVersion:"1045", FieldPath:""}): type: 'Normal' reason: 'LeaderElection' c1-worker-submariner-gateway became leader
2023-04-05T02:52:08.264Z INF ..reswan/libreswan.go:123 libreswan            Using NATT UDP port 4500
2023-04-05T02:52:08.264Z INF ..reswan/libreswan.go:556 libreswan            Starting Pluto
2023-04-05T02:52:13.311Z INF ..gine/cableengine.go:104 CableEngine          CableEngine controller started, driver: "libreswan"
2023-04-05T02:52:13.316Z INF ..public_ip_watcher.go:62 Endpoint             Starting the public IP watcher.
2023-04-05T02:52:13.316Z INF ..ers/tunnel/tunnel.go:40 Tunnel               Starting the tunnel controller
2023-04-05T02:52:13.349Z INF ..r/datastoresyncer.go:72 DSSyncer             Starting the datastore syncer
2023-04-05T02:52:13.459Z INF ..er/healthchecker.go:110 HealthChecker        CableEngine HealthChecker started with PingInterval: 1, MaxPacketLossCount: 5
2023-04-05T02:52:13.641Z ERR ..ne/syncer/syncer.go:237 GWSyncer             Error retrieving driver connections: error waiting for whack to complete: exit status 33
2023-04-05T02:52:14.602Z INF ../datastoresyncer.go:218 DSSyncer             Ensuring we are the only endpoint active for this cluster
2023-04-05T02:52:14.603Z INF ../datastoresyncer.go:297 DSSyncer             Creating local submariner Cluster: types.SubmarinerCluster{ID:"c1", Spec:v1.ClusterSpec{ClusterID:"c1", ColorCodes:[]string{"blue"}, ServiceCIDR:[]string{"10.88.0.0/16"}, ClusterCIDR:[]string{"10.8.0.0/16"}, GlobalCIDR:[]string{}}}
2023-04-05T02:52:14.757Z INF ../datastoresyncer.go:310 DSSyncer             Creating local submariner Endpoint: types.SubmarinerEndpoint{Spec:v1.EndpointSpec{ClusterID:"c1", CableName:"submariner-cable-c1-172-19-0-8", HealthCheckIP:"10.8.1.1", Hostname:"c1-worker", Subnets:[]string{"10.88.0.0/16", "10.8.0.0/16"}, PrivateIP:"172.19.0.8", PublicIP:"35.233.208.59", NATEnabled:true, Backend:"libreswan", BackendConfig:map[string]string{"natt-discovery-port":"4490", "preferred-server":"false", "udp-port":"4500"}}}
2023-04-05T02:52:15.144Z INF ../datastoresyncer.go:104 DSSyncer             Datastore syncer started
Initializing NSS database

2023-04-05T02:53:24.436Z DBG ..ry/request_handle.go:52 NAT                  Received request from 172.19.0.10:4490 - REQUEST_NUMBER: 0xd34b94d77616907a, SENDER: "submariner-cable-c2-172-19-0-10", RECEIVER: "submariner-cable-c1-172-19-0-8"
2023-04-05T02:53:24.437Z DBG ..y/request_handle.go:117 NAT                  Sending response to 172.19.0.10:4490 - REQUEST_NUMBER: 0xd34b94d77616907a, RESPONSE: OK, SENDER: "submariner-cable-c1-172-19-0-8", RECEIVER: "submariner-cable-c2-172-19-0-10"
2023-04-05T02:53:24.763Z INF ..thchecker/pinger.go:106 HealthChecker        Starting pinger for IP "10.9.1.1"
2023-04-05T02:53:24.763Z INF ..er/healthchecker.go:159 HealthChecker        CableEngine HealthChecker started pinger for CableName: "submariner-cable-c2-172-19-0-10" with HealthCheckIP "10.9.1.1"
2023-04-05T02:53:24.772Z INF ..ery/natdiscovery.go:162 NAT                  Starting NAT discovery for endpoint "submariner-cable-c2-172-19-0-10"
2023-04-05T02:53:25.684Z DBG ..ery/request_send.go:115 NAT                  Sending request - REQUEST_NUMBER: 0xa175fe1a8d86db0f, SENDER: "submariner-cable-c1-172-19-0-8", RECEIVER: "submariner-cable-c2-172-19-0-10", USING_SRC: 172.19.0.8:4490, USING_DST: 172.19.0.10:4490
2023-04-05T02:53:25.685Z DBG ..ery/request_send.go:115 NAT                  Sending request - REQUEST_NUMBER: 0xa175fe1a8d86db10, SENDER: "submariner-cable-c1-172-19-0-8", RECEIVER: "submariner-cable-c2-172-19-0-10", USING_SRC: 172.19.0.8:4490, USING_DST: 35.233.208.59:4490
2023-04-05T02:53:25.687Z DBG ..y/response_handle.go:31 NAT                  Received response from 172.19.0.10:4490 - REQUEST_NUMBER: 0xa175fe1a8d86db0f, RESPONSE: OK, SENDER: "submariner-cable-c2-172-19-0-10", RECEIVER: "submariner-cable-c1-172-19-0-8"
2023-04-05T02:53:25.688Z DBG ../remote_endpoint.go:184 NAT                  selected private IP "172.19.0.10" for endpoint "submariner-cable-c2-172-19-0-10"
2023-04-05T02:53:25.688Z INF ..gine/cableengine.go:195 CableEngine          Installing Endpoint cable "submariner-cable-c2-172-19-0-10"
002 listening for IKE messages
003 IP interfaces veth980e1e4a and vethb24b8f85 share address 10.8.1.1!
003 IP interfaces veth980e1e4a and veth52883afe share address 10.8.1.1!
003 IP interfaces veth980e1e4a and veth622ca667 share address 10.8.1.1!
003 IP interfaces veth980e1e4a and veth6d316896 share address 10.8.1.1!
003 IP interfaces vethb24b8f85 and veth52883afe share address 10.8.1.1!
003 IP interfaces vethb24b8f85 and veth622ca667 share address 10.8.1.1!
003 IP interfaces vethb24b8f85 and veth6d316896 share address 10.8.1.1!
003 IP interfaces veth52883afe and veth622ca667 share address 10.8.1.1!
003 IP interfaces veth52883afe and veth6d316896 share address 10.8.1.1!
003 IP interfaces veth622ca667 and veth6d316896 share address 10.8.1.1!
002 adding UDP interface vx-submariner 240.19.0.8:500
002 adding UDP interface vx-submariner 240.19.0.8:4500
002 forgetting secrets
002 loading secrets from "/etc/ipsec.secrets"
002 loading secrets from "/etc/ipsec.d/submariner.secrets"
2023-04-05T02:53:25.695Z INF ..reswan/libreswan.go:344 libreswan            Creating connection(s) for {"metadata":{"name":"c2-submariner-cable-c2-172-19-0-10","namespace":"submariner-operator","uid":"6e207662-17a5-4717-b5b8-8dc879d49431","resourceVersion":"1272","generation":1,"creationTimestamp":"2023-04-05T02:53:24Z","labels":{"submariner-io/clusterID":"c2"},"managedFields":[{"manager":"submariner-gateway","operation":"Update","apiVersion":"submariner.io/v1","time":"2023-04-05T02:53:24Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:submariner-io/clusterID":{}}},"f:spec":{".":{},"f:backend":{},"f:backend_config":{".":{},"f:natt-discovery-port":{},"f:preferred-server":{},"f:udp-port":{}},"f:cable_name":{},"f:cluster_id":{},"f:healthCheckIP":{},"f:hostname":{},"f:nat_enabled":{},"f:private_ip":{},"f:public_ip":{},"f:subnets":{}}}}]},"spec":{"cluster_id":"c2","cable_name":"submariner-cable-c2-172-19-0-10","healthCheckIP":"10.9.1.1","hostname":"c2-worker","subnets":["10.99.0.0/16","10.9.0.0/16"],"private_ip":"172.19.0.10","public_ip":"35.233.208.59","nat_enabled":true,"backend":"libreswan","backend_config":{"natt-discovery-port":"4490","preferred-server":"false","udp-port":"4500"}}} in bi-directional mode
2023-04-05T02:53:25.714Z INF ..reswan/libreswan.go:406 libreswan            Executing whack with args: [--psk --encrypt --name submariner-cable-c2-172-19-0-10-0-0 --id 172.19.0.8 --host 172.19.0.8 --client 10.88.0.0/16 --ikeport 4500 --to --id 172.19.0.10 --host 172.19.0.10 --client 10.99.0.0/16 --ikeport 4500]
002 "submariner-cable-c2-172-19-0-10-0-0": added IKEv2 connection
181 "submariner-cable-c2-172-19-0-10-0-0" #2: initiating IKEv2 connection
2023-04-05T02:53:26.131Z INF ..reswan/libreswan.go:406 libreswan            Executing whack with args: [--psk --encrypt --name submariner-cable-c2-172-19-0-10-0-1 --id 172.19.0.8 --host 172.19.0.8 --client 10.88.0.0/16 --ikeport 4500 --to --id 172.19.0.10 --host 172.19.0.10 --client 10.9.0.0/16 --ikeport 4500]
002 "submariner-cable-c2-172-19-0-10-0-1": added IKEv2 connection
2023-04-05T02:53:26.428Z INF ..reswan/libreswan.go:406 libreswan            Executing whack with args: [--psk --encrypt --name submariner-cable-c2-172-19-0-10-1-0 --id 172.19.0.8 --host 172.19.0.8 --client 10.8.0.0/16 --ikeport 4500 --to --id 172.19.0.10 --host 172.19.0.10 --client 10.99.0.0/16 --ikeport 4500]
002 "submariner-cable-c2-172-19-0-10-1-0": added IKEv2 connection
002 "submariner-cable-c2-172-19-0-10-1-0" #8: initiating Child SA using IKE SA #2
189 "submariner-cable-c2-172-19-0-10-1-0" #8: sent CREATE_CHILD_SA request for new IPsec SA
004 "submariner-cable-c2-172-19-0-10-1-0" #8: initiator established Child SA using #2; IPsec tunnel [10.8.0.0-10.8.255.255:0-65535 0] -> [10.99.0.0-10.99.255.255:0-65535 0] {ESP=>0x1f2a27a0 <0x1944765f xfrm=AES_GCM_16_256-NONE DPD=passive}
2023-04-05T02:53:27.068Z INF ..reswan/libreswan.go:406 libreswan            Executing whack with args: [--psk --encrypt --name submariner-cable-c2-172-19-0-10-1-1 --id 172.19.0.8 --host 172.19.0.8 --client 10.8.0.0/16 --ikeport 4500 --to --id 172.19.0.10 --host 172.19.0.10 --client 10.9.0.0/16 --ikeport 4500]
002 "submariner-cable-c2-172-19-0-10-1-1": added IKEv2 connection
002 "submariner-cable-c2-172-19-0-10-1-1" #10: initiating Child SA using IKE SA #2
189 "submariner-cable-c2-172-19-0-10-1-1" #10: sent CREATE_CHILD_SA request for new IPsec SA
004 "submariner-cable-c2-172-19-0-10-1-1" #10: initiator established Child SA using #2; IPsec tunnel [10.8.0.0-10.8.255.255:0-65535 0] -> [10.9.0.0-10.9.255.255:0-65535 0] {ESP=>0x3cc78461 <0x61ae9cf7 xfrm=AES_GCM_16_256-NONE DPD=passive}
2023-04-05T02:53:27.289Z INF ..gine/cableengine.go:202 CableEngine          Successfully installed Endpoint cable "submariner-cable-c2-172-19-0-10" with remote IP 172.19.0.10