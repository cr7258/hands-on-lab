
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Visualizing a Deployment Graph with Gradio &#8212; Ray 3.0.0.dev0</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css@digest=5115cc725059bd94278eecd172e13a965bf8f5a9.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/versionwarning.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../../_static/js/docsearch.js"></script>
    <script src="../../_static/js/rate-the-docs.es.min.js"></script>
    <script defer="defer" src="../../_static/js/termynal.js"></script>
    <script defer="defer" src="../../_static/js/custom.js"></script>
    <script defer="defer" src="../../_static/js/top-navigation.js"></script>
    <script src="../../_static/js/tags.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js@digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script async="async" src="../../../../_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/serve/tutorials/gradio-dag-visualization.html" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Java Tutorial" href="java.html" />
    <link rel="prev" title="Scaling your Gradio app with Ray Serve" href="gradio-integration.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>


  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="../../../../_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.com", "build_date": "2023-04-28T22:33:27Z", "builder": "sphinx", "canonical_url": null, "commit": "ff36b8e7", "docroot": "/doc/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-2", "language": "en", "page": "serve/tutorials/gradio-dag-visualization", "programming_language": "py", "project": "anyscale-ray", "proxied_api_host": "/_", "source_suffix": ".md", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "", "version": "master"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../../_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 3.0.0.dev0</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../index.html">
                    Welcome to Ray!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/index.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/getting-started.html">
   Getting Started Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-more-libs/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/use-cases.html">
   Use Cases
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/ray-libraries.html">
   Ecosystem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-core/walkthrough.html">
   Ray Core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-air/getting-started.html">
   Ray AI Runtime (AIR)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../data/data.html">
   Ray Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../train/train.html">
   Ray Train
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../tune.html">
   Ray Tune
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../index.html">
   Ray Serve
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../getting_started.html">
     Getting Started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../key-concepts.html">
     Key Concepts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../user-guide.html">
     User Guides
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../architecture.html">
     Architecture
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="index.html">
     Examples
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="serve-ml-models.html">
       Serving ML Models (Tensorflow, PyTorch, Scikit-Learn, others)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="batch.html">
       Batching Tutorial
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="rllib.html">
       Serving RLlib Models
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gradio-integration.html">
       Scaling your Gradio app with Ray Serve
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="gradio-dag-visualization.html#">
       Visualizing a Deployment Graph with Gradio
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="java.html">
       Java Tutorial
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="stable-diffusion.html">
       Serving a Stable Diffusion Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="text-classification.html">
       Serving a Distilbert Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="object-detection.html">
       Serving an Object Detection Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="deployment-graph-patterns.html">
       Deployment Graph Patterns
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/index.html">
     Ray Serve API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../rllib/index.html">
   Ray RLlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-more-libs/index.html">
   More Libraries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-core/cluster/index.html">
   Ray Clusters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-observability/monitoring-debugging/monitoring-debugging.html">
   Monitoring and Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-references/api.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-contribute/stability.html">
   Developer Guides
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Fserve/tutorials/gradio-dag-visualization.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/serve/tutorials/gradio-dag-visualization.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/serve/tutorials/gradio-dag-visualization.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="gradio-dag-visualization.html#providing-input">
   Providing Input
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="gradio-dag-visualization.html#single-input">
     Single Input
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="gradio-dag-visualization.html#multiple-inputs">
     Multiple Inputs
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Visualizing a Deployment Graph with Gradio</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="gradio-dag-visualization.html#providing-input">
   Providing Input
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="gradio-dag-visualization.html#single-input">
     Single Input
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="gradio-dag-visualization.html#multiple-inputs">
     Multiple Inputs
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="visualizing-a-deployment-graph-with-gradio">
<span id="serve-gradio-dag-visualization"></span><h1>Visualizing a Deployment Graph with Gradio<a class="headerlink" href="gradio-dag-visualization.html#visualizing-a-deployment-graph-with-gradio" title="Permalink to this headline">#</a></h1>
<p>You can visualize the <a class="reference internal" href="../model_composition.html#serve-model-composition-deployment-graph"><span class="std std-ref">deployment graph</span></a> you built with <a class="reference external" href="https://gradio.app/">Gradio</a>. This integration allows you to interactively run your deployment graph through the Gradio UI and see the intermediate outputs of each node in real time as they finish evaluation.</p>
<p>To access this feature, you need to install Gradio.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Gradio requires Python 3.7+. Make sure to install Python 3.7+ to use this tool.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install gradio</span>
</pre></div>
</div>
<p>Additionally, you can optionally install <code class="docutils literal notranslate"><span class="pre">pydot</span></code> and <code class="docutils literal notranslate"><span class="pre">graphviz</span></code>. This will allow this tool to incorporate the complementary <a class="reference internal" href="../model_composition.html#pydot-visualize-dag"><span class="std std-ref">graphical illustration</span></a> of the nodes and edges.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pydot</span> <span class="o">&amp;&amp;</span> <span class="n">brew</span> <span class="n">install</span> <span class="n">graphviz</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-item docutils">
<p class="sd-tab-label rubric">Windows</p>
<div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pydot</span> <span class="o">&amp;&amp;</span> <span class="n">winget</span> <span class="n">install</span> <span class="n">graphviz</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-item docutils">
<p class="sd-tab-label rubric">Linux</p>
<div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pydot</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">graphviz</span>
</pre></div>
</div>
</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
Also, for the [quickstart example](gradio-vis-quickstart), install the `transformers` module to pull models through [HuggingFace&#39;s Pipelines](https://huggingface.co/docs/transformers/main_classes/pipelines).
```console
pip install transformers
```

(gradio-vis-quickstart)=
## Quickstart Example

Let&#39;s build and visualize a deployment graph that
  1. Downloads an image
  2. Classifies the image
  3. Translates the results to German.

This will be the graphical structure of our deployment graph:

![graph structure](https://raw.githubusercontent.com/ray-project/images/master/docs/serve/gradio_visualization/graph_illustration.png)

Open up a new file named `demo.py`. First, let&#39;s take care of imports:
```{literalinclude} ../doc_code/gradio_dag_visualize.py
:start-after: __doc_import_begin__
:end-before: __doc_import_end__
:language: python
```

### Defining Nodes

The `downloader` function takes an image&#39;s URL, downloads it, and returns the image in the form of an `ImageFile`.
```{literalinclude} ../doc_code/gradio_dag_visualize.py
:start-after: __doc_downloader_begin__
:end-before: __doc_downloader_end__
:language: python
```

The `ImageClassifier` class, upon initialization, loads the `google/vit-base-patch16-224` image classification model using the Transformers pipeline. Its `classify` method takes in an `ImageFile`, runs the model on it, and outputs the classification labels and scores.
```{literalinclude} ../doc_code/gradio_dag_visualize.py
:start-after: __doc_classifier_begin__
:end-before: __doc_classifier_end__
:language: python
```

The `Translator` class, upon initialization, loads the `t5-small` translation model that translates from English to German. Its `translate` method takes in a map from strings to floats, and translates each of its string keys to German.
```{literalinclude} ../doc_code/gradio_dag_visualize.py
:start-after: __doc_translator_begin__
:end-before: __doc_translator_end__
:language: python
```

### Building the Graph

Finally, we can build our graph by defining dependencies between nodes.
```{literalinclude} ../doc_code/gradio_dag_visualize.py
:start-after: __doc_build_graph_begin__
:end-before: __doc_build_graph_end__
:language: python
```

### Deploy and Execute

Let&#39;s deploy and run the deployment graph! Deploy the graph with `serve run` and turn on the visualization with the `gradio` flag:
```console
serve run demo:serve_entrypoint --gradio
```

If you go to `http://localhost:7860`, you can now access the Gradio visualization! Type in a link to an image, click &quot;Run&quot;, and you can see all of the intermediate outputs of your graph, including the final output!
![gradio vis](https://raw.githubusercontent.com/ray-project/images/master/docs/serve/gradio_visualization/bear_example.png)

## Setting Up the Visualization
Now let&#39;s see how to set up this visualization tool.

### Requirement: Driver

The `DAGDriver` is required for the visualization. If the `DAGDriver` is not already part of your deployment graph, you can include it with:
```python
new_root_node = DAGDriver.bind(old_root_node)
```

### Ensure Output Data is Properly Displayed

Since the Gradio UI is set at deploy time, the type of Gradio component used to display intermediate outputs of the graph is also statically determined from the graph deployed. It is important that the correct Gradio component is used for each graph node.

The developer simply needs to specify the return type annotation of each function or method in the deployment graph.
:::{note}
If no return type annotation is specified for a node, then the Gradio component for that node will default to a [Gradio Textbox](https://gradio.app/docs/#textbox).
</pre></div>
</div>
<p>The following table lists the supported data types and which Gradio component theyâ€™re displayed on.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 60%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Data Type</p></th>
<th class="head"><p>Gradio component</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#number">Numeric field</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#textbox">Textbox</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#checkbox">Checkbox</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pd.Dataframe</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#dataframe">DataFrame</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">dict</span></code>, <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#json">JSON field</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PIL.Image</span></code>, <code class="docutils literal notranslate"><span class="pre">torch.Tensor</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#image">Image</a></p></td>
</tr>
</tbody>
</table>
<p>For instance, the output of the following function node will be displayed through a <a class="reference external" href="https://gradio.app/docs/#textbox">Gradio Checkbox</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@serve</span><span class="o">.</span><span class="n">deployment</span>
<span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">begin</span> <span class="o">&lt;=</span> <span class="n">end</span>
</pre></div>
</div>
<p><img alt="Gradio checkbox example" src="https://raw.githubusercontent.com/ray-project/images/master/docs/serve/gradio_visualization/checkbox_example.png" /></p>
<section id="providing-input">
<h2>Providing Input<a class="headerlink" href="gradio-dag-visualization.html#providing-input" title="Permalink to this headline">#</a></h2>
<p>Similarly, the Gradio component used for each graph input should also be correct. For instance, a deployment graph for image classification could either take an image URL from which it downloads the image, or take the image directly as input. In the first case, the Gradio UI should allow users to input the URL through a textbox, but in the second case, the Gradio UI should allow users to upload the image through an Image component.</p>
<p>The data type of each user input can be specified by passing in <code class="docutils literal notranslate"><span class="pre">input_type</span></code> to <code class="docutils literal notranslate"><span class="pre">InputNode()</span></code>. The following two sections will describe the two supported ways to provide input through <code class="docutils literal notranslate"><span class="pre">input_type</span></code>.</p>
<p>The following table describes the supported input data types and which Gradio component is used to collect that data.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 60%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Data Type</p></th>
<th class="head"><p>Gradio component</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#number">Numeric field</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#textbox">Textbox</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#checkbox">Checkbox</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pd.Dataframe</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#dataframe">DataFrame</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PIL.Image</span></code>, <code class="docutils literal notranslate"><span class="pre">torch.Tensor</span></code></p></td>
<td><p><a class="reference external" href="https://gradio.app/docs/#image">Image</a></p></td>
</tr>
</tbody>
</table>
<section id="single-input">
<h3>Single Input<a class="headerlink" href="gradio-dag-visualization.html#single-input" title="Permalink to this headline">#</a></h3>
<p>If there is a single input to the deployment graph, it can be provided directly through <code class="docutils literal notranslate"><span class="pre">InputNode</span></code>. The following is an example code snippet.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">InputNode</span><span class="p">(</span><span class="n">input_type</span><span class="o">=</span><span class="n">ImageFile</span><span class="p">)</span> <span class="k">as</span> <span class="n">user_input</span><span class="p">:</span>
    <span class="n">f_node</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice there is a single input, which is stored in <code class="docutils literal notranslate"><span class="pre">user_input</span></code> (an instance of <code class="docutils literal notranslate"><span class="pre">InputNode</span></code>). The data type of this single input must be one of the supported input data types.</p>
</div>
<p>When initializating <code class="docutils literal notranslate"><span class="pre">InputNode()</span></code>, the data type can be specified by passing in a <code class="docutils literal notranslate"><span class="pre">type</span></code> variable to the parameter <code class="docutils literal notranslate"><span class="pre">input_type</span></code>. Here, the type is specified to be <code class="docutils literal notranslate"><span class="pre">ImageFile</span></code>, so the Gradio visualization will take in user input through an <a class="reference external" href="https://gradio.app/docs/#image">Image component</a>.
<img alt="single input example" src="https://raw.githubusercontent.com/ray-project/images/master/docs/serve/gradio_visualization/single_input.png" /></p>
</section>
<section id="multiple-inputs">
<h3>Multiple Inputs<a class="headerlink" href="gradio-dag-visualization.html#multiple-inputs" title="Permalink to this headline">#</a></h3>
<p>If there are multiple inputs to the deployment graph, it can be provided by accessing attributes of <code class="docutils literal notranslate"><span class="pre">InputNode</span></code>. The following is an example code snippet.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">InputNode</span><span class="p">(</span><span class="n">input_type</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span> <span class="k">as</span> <span class="n">user_input</span><span class="p">:</span>
    <span class="n">f_node</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">user_input</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">g_node</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">user_input</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">user_input</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice there are multiple inputs: <code class="docutils literal notranslate"><span class="pre">user_input[0]</span></code>, <code class="docutils literal notranslate"><span class="pre">user_input[1]</span></code>, and <code class="docutils literal notranslate"><span class="pre">user_input[&quot;id&quot;]</span></code>. They are accessed by indexing into <code class="docutils literal notranslate"><span class="pre">user_input</span></code>. The data types for each of these inputs must be one of the supported input data types.</p>
</div>
<p>When initializing <code class="docutils literal notranslate"><span class="pre">InputNode()</span></code>, these data types can be specified by passing in a dictionary that maps key to <code class="docutils literal notranslate"><span class="pre">type</span></code> (where key is integer or string) to the parameter <code class="docutils literal notranslate"><span class="pre">input_type</span></code>. Here, the input types are specified to be <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>, and <code class="docutils literal notranslate"><span class="pre">str</span></code>, so the Gradio visualization will take in the three inputs through one <a class="reference external" href="https://gradio.app/docs/#number">Numeric Field</a> and two <a class="reference external" href="https://gradio.app/docs/#textbox">Textboxes</a>.</p>
<p><img alt="multiple input example" src="https://raw.githubusercontent.com/ray-project/images/master/docs/serve/gradio_visualization/multiple_inputs.png" /></p>
</section>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="gradio-integration.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Scaling your Gradio app with Ray Serve</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="java.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Java Tutorial</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2023, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf"></script>


  </body>
</html>